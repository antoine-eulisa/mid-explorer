<!doctype html>
<html>
  <head>
    <title>MID demonstration app</title>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:," />
    <script
      src="smallest-enclosing-circle.js"
      type="text/javascript"
      defer
    ></script>
    <script src="d3.v7.min.js" type="text/javascript" defer></script>
    <script src="cmd_graph.js" type="text/javascript" defer></script>
    <script src="esp.js" type="text/javascript" defer></script>
    <link
      href="css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <link href="css/custom.css" rel="stylesheet" crossorigin="anonymous" />
  </head>
  <body>
    <div class="container">
      <nav class="navbar navbar-dark bg-primary mt-1">
        <div class="container-fluid">
          <a class="navbar-brand">MID Business Rules POC</a>
        </div>
      </nav>

      <ul class="nav nav-tabs mt-2" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="home-tab"
            data-bs-toggle="tab"
            data-bs-target="#home"
            type="button"
            role="tab"
            aria-controls="home"
            aria-selected="true"
          >
            build your data!
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="queryMID-tab"
            data-bs-toggle="tab"
            data-bs-target="#queryMID"
            type="button"
            role="tab"
            aria-controls="queryMID"
            aria-selected="false"
          >
            query your MID!
          </button>
        </li>
        <!--
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="queryCIR-tab" data-bs-toggle="tab" data-bs-target="#queryCIR" type="button" role="tab" aria-controls="queryCIR" aria-selected='false' >
           query your CIR! 
          </button>
        </li>
        -->
      </ul>

      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="home"
          role="tabpanel"
          aria-labelledby="home-tab"
        >
          <div class="row mt-1">
            <div class="col-6">
              build your own dataset
              <!--
              <textarea class="form-control" rows="20" id="query"></textarea>
              -->
              <p>
                <!-- TODO add system button -->
                <button
                  type="button"
                  id="addSystemButton"
                  class="btn btn-primary mt-1"
                >
                  add System
                </button>
                <span id="systemsListForShow"></span>
              </p>
              <p>
                <!-- TODO add system select for IG -->
                belonging to system
                <select id="systemOfGroup"></select>
                please
                <button
                  type="button"
                  id="addIGButton"
                  class="btn btn-primary mt-1"
                >
                  add Identiy Group
                </button>
              </p>

              <p>
                between IG
                <select id="leftIG"></select>
                and IG
                <select id="rightIG"></select>
                add a
                <select id="linkColour"></select>
                link
                <button
                  type="button"
                  id="addLinkButton"
                  class="btn btn-primary mt-1"
                >
                  add link
                </button>
              </p>
            </div>
            <div class="col-6">
              State management
              <div class="row mt-1">
                <div class="col-6">
                  <div class="input-group mb-3">
                    <input
                      type="text"
                      id="stateName"
                      class="form-control"
                      placeholder="identifier of this dataset"
                    />
                    <button type="button" id="saveData" class="btn btn-success">
                      save as!
                    </button>
                  </div>
                </div>
                <div class="col-6">
                  <div class="input-group mb-3">
                    <select
                      class="form-select"
                      id="selectedSavedState"
                    ></select>
                    <button type="button" id="loadData" class="btn btn-success">
                      load this!
                    </button>
                  </div>
                </div>
              </div>
              <!-- Button trigger modal -->
              <button
                type="button"
                class="btn btn-success"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal"
              >
                import/export
              </button>
              <button type="button" id="resetState" class="btn btn-danger">
                reset current state
              </button>

              <!-- Modal -->
              <div
                class="modal fade"
                id="exampleModal"
                tabindex="-1"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="exampleModalLabel">
                        external state management
                      </h1>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      <textarea
                        class="form-control"
                        id="importExportState"
                        placeholder="current state to export, or remote state to import"
                        id="floatingTextarea2"
                        style="height: 100px"
                      ></textarea>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-success"
                        id="exportCurrentState"
                      >
                        export current
                      </button>
                      <button
                        type="button"
                        class="btn btn-success"
                        id="importLoadedState"
                      >
                        import as current
                      </button>
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal"
                      >
                        Close
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          class="tab-pane fade"
          id="queryMID"
          role="tabpanel"
          aria-labelledby="queryMID-tab"
        >
          <div class="row mt-1">
            <div class="col-12">
              <p>
                get me link
                <select id="queriedLink"></select>
                using ESP profile for
                <select id="LMFQueryTypes">
                  <option value="YLR1">YLR - 1st step</option>
                  <option value="YLR2">YLR - 2nd step</option>
                  <!--
                <option value="RL">Red link</option>
                <option value="R1">Rectification - 1<sup>st</sup> step</option>
                <option value="R2">Rectification - 2<sup>nd</sup> step</option>
                --></select>
                as the verifying authority
                <input type="checkbox" id="asVerifierOfTheLink" checked />
              </p>
              <p style="display: none">
                By the way, it does so happen that I have access to the
                following systems
                <span id="systemsListForMIDQuery"></span>
              </p>
              <button type="button" id="LMFquery" class="btn btn-primary mt-1">
                fetch!
              </button>
            </div>
          </div>
          <div class="row mt-1">
            <div class="col-8 showdown">
              <span id="MIDQueryResult"></span>
            </div>
            <div class="col-4 showdown">
              <span id="MIDQueryMotivations"></span>
            </div>
          </div>
        </div>
        <div
          class="tab-pane fade"
          id="queryCIR"
          role="tabpanel"
          aria-labelledby="queryCIR-tab"
        >
          <div class="row mt-1">
            <div class="col-12">
              <p>
                I have access to the following systems
                <select id="systemsAccessCIR" multiple></select>
                get me groups
                <select id="queriedGroups" multiple></select>

                <br />
                <button
                  type="button"
                  id="DMFquery"
                  class="btn btn-primary mt-1"
                >
                  fetch!
                </button>
              </p>
            </div>
          </div>
        </div>
        <div>
          <hr />
          Current state:
          <div id="graph-container" class="row mt-1"></div>
          <div class="row mt-1">
            <div class="col-4 showdown">
              <span id="systemsShowroom"></span>
            </div>
            <div class="col-4 showdown" style="border-left: 1px solid grey">
              <span id="groupsShowroom"></span>
            </div>
            <div class="col-4 showdown" style="border-left: 1px solid grey">
              <span id="linksShowroom"></span>
              <p id="visible_console"></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
				<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
				<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
				-->
  </body>
</html>
